<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8"/>
  <title>Modul 1 â€“ Asistent medical balneofiziokinetoterapie ÅŸi recuperare-Anul 1</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="icon" href="data:,"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <style>
    :root {
      --clr-main: #589edf;
      --clr-accent: #1976d2;
      --clr-bg: #f0f4f7;
      --clr-bg-dark: #23272f;
      --clr-text: #333;
      --clr-error: #d62828;
      --radius: 10px;
      --shadow: 0 2px 12px rgba(89,158,223,0.13);
      --font: 'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
    }
    body {
      margin: 0;
      font-family: var(--font);
      background: var(--clr-bg);
      color: var(--clr-text);
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1em 2em;
      background: var(--clr-main);
      color: #fff;
      box-shadow: var(--shadow);
    }
    header h1 {
      font-size: 1.5em;
      margin: 0 1em;
      font-weight: 600;
      letter-spacing: 1px;
    }
    header form {
      display: flex;
      gap: .5em;
      flex-wrap: wrap;
    }
    header input {
      padding: .5em;
      border-radius: var(--radius);
      border: none;
      font-size: 1em;
      background: #fff;
      color: var(--clr-text);
      box-shadow: 0 1px 4px #b3cdfa33;
    }
    header button {
      background: var(--clr-accent);
      color: #fff;
      border-radius: var(--radius);
      padding: .5em 1.2em;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: background .2s, transform .2s;
    }
    header button:hover {
      background: #1565c0;
      transform: translateY(-2px);
    }
    main {
      display: flex;
      gap: 2em;
      padding: 2em;
      max-width: 1200px;
      margin: auto;
    }
    aside#sidebar {
      width: 320px;
      background: #fff;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1.5em 1em;
      min-height: 500px;
    }
    .chapter {
      margin-bottom: 1.2em;
    }
    .chapter-title {
      font-weight: 700;
      font-size: 1.15em;
      color: var(--clr-main);
      margin-bottom: .3em;
      cursor: pointer;
      padding: .4em .7em;
      border-radius: var(--radius);
      transition: background .2s;
    }
    .chapter-title:hover {
      background: #eaf6ff;
    }
    .chapter.active > .chapter-title {
      background: var(--clr-accent);
      color: #fff;
    }
    .chapter-menu {
      display: flex;
      flex-direction: column;
      gap: .5em;
      margin-left: .7em;
      margin-top: .3em;
    }
    .media-btn {
      background: #eaf6ff;
      color: var(--clr-accent);
      border: 2px solid var(--clr-accent);
      font-weight: 600;
      font-size: 1em;
      padding: .6em 1.2em;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      transition: background .2s, color .2s, border .2s, transform .2s;
      cursor: pointer;
    }
    .media-btn:hover, .media-btn.active {
      background: var(--clr-accent);
      color: #fff;
      border-color: var(--clr-accent);
      transform: translateY(-2px) scale(1.04);
    }
    section#content {
      flex: 1;
      background: #fff;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 2em 2em 2em 2em;
      min-height: 500px;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      justify-content: flex-start;
    }
    .frame {
      background: #f8fbff;
      padding: 2em;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      max-width: 900px;
      margin: 2em auto;
    }
    .hidden { display: none; }
    @media (max-width: 900px) {
      main { flex-direction: column; gap: 1em; padding: 1em; }
      aside#sidebar { width: 100%; min-height: unset; }
      section#content { padding: 1em; }
    }
    @media (max-width: 600px) {
      header { flex-direction: column; gap: 1em; padding: 1em; }
      main { padding: .5em; }
      .frame { padding: 1em; }
    }
    .pdf-btn {
      background: #fff0f0 !important;
      border-color: #d62828 !important;
    }
    .pdf-btn:hover {
      background: #d62828 !important;
      color: #fff !important;
    }
    .mp4-btn {
      background: #e8f5e9 !important;
      border-color: #388e3c !important;
    }
    .mp4-btn:hover {
      background: #388e3c !important;
      color: #fff !important;
    }
  </style>
</head>
<body>
<header>
  <button onclick="location.href='../Index.html'">âŸµ Ãnapoi la Index</button>
  <h1>Modul 1 â€“ Asistent medical balneofiziokinetoterapie ÅŸi recuperare - Anul 1</h1>
  <form id="userForm">
    <input id="prenume" placeholder="Prenume" required>
    <input id="nume"   placeholder="Nume"   required>
    <input id="email"  placeholder="Email" type="email" required>
    <button>SalveazÄƒ</button>
  </form>
  <button id="toggleTheme">ğŸŒ™/â˜€ï¸</button>
</header>
<main>
  <aside id="sidebar"></aside>
  <section id="content">SelecteazÄƒ un capitolâ€¦</section>
</main>
<audio id="snd-ok" src="" preload="auto"></audio>
<audio id="snd-nok" src="" preload="auto"></audio>
<script type="module">
// ===== CONFIG =====
const LANG = {
  select_ch:'SelecteazÄƒ un capitolâ€¦',
  saved:'Salvat',
  pdf:'PDF',
  video:'VIDEO',
  timer:'Timp',
  next:'UrmÄƒtoarea Ã®ntrebare',
  back:'Ãnapoi',
  choose:'âš ï¸ Alege un rÄƒspuns!',
  ok:'âœ”ï¸ Corect!',
  nok:'âŒ Incorect. Corect:',
  summary_title:'FiÈ™Äƒ de evaluare',
  user:'Utilizator',
  email:'Email',
  date:'Data completÄƒrii',
  duration:'Durata',
  correct:'Corecte',
  incorrect:'Incorecte',
  score:'Scor',
  result:'Rezultat',
  admitted:'Admis',
  rejected:'Respins',
  reset:'Reset'
};
const STRUCTURE = [
  {
    name: 'Capitolul 1',
    options: [
      'StructurÄƒ È™i obiective',
      'Teorie',
      'Aplicabilitate',
      'Chestionar',
      'FiÈ™a personalÄƒ de evaluare'
    ]
  },
  {
    name: 'Capitolul 2',
    options: [
      'StructurÄƒ È™i obiective',
      'Teorie',
      'Aplicabilitate',
      'Chestionar',
      'FiÈ™a personalÄƒ de evaluare'
    ]
  },
  {
    name: 'Capitolul 3',
    options: [
      'StructurÄƒ È™i obiective',
      'Teorie',
      'Aplicabilitate',
      'Chestionar',
      'FiÈ™a personalÄƒ de evaluare'
    ]
  }
];
let currentChap=null, currentOpt=null, currentType=null;
let timer=0, timerID=null, questions=[], qIndex=0;
let answers = [];
const $ = sel=>document.querySelector(sel);
const $$ = sel=>[...document.querySelectorAll(sel)];
const fmtTime = s=>`${String(Math.floor(s/60)).padStart(2,'0')}:${String(s%60).padStart(2,'0')}`;
function buildSidebar(){
  const sb = $('#sidebar');
  sb.innerHTML = '';
  STRUCTURE.forEach(chap => {
    const capDiv = document.createElement('div');
    capDiv.className = 'chapter';
    capDiv.innerHTML = `
      <div class="chapter-title">${chap.name}</div>
      <div class="chapter-menu" style="display:none;flex-direction:column;gap:.5em;margin-top:.5em;">
        ${chap.options.map(opt => {
          if(opt === 'StructurÄƒ È™i obiective') {
            return `
              <div style='display:flex;flex-direction:column;gap:.3em;'>
                <button class='media-btn struct-btn' data-chap="${chap.name}" data-opt="StructurÄƒ È™i obiective">StructurÄƒ È™i obiective</button>
                <div style='display:flex;gap:.5em;margin-left:1.2em;'>
                  <button class="media-btn pdf-btn" data-chap="${chap.name}" data-opt="StructurÄƒ È™i obiective" data-type="pdf"><span style='color:#d62828;font-weight:bold;'>ğŸ“„ PDF</span></button>
                  <button class="media-btn mp4-btn" data-chap="${chap.name}" data-opt="StructurÄƒ È™i obiective" data-type="mp4"><span style='color:#388e3c;font-weight:bold;'>ğŸ¬ MP4</span></button>
                </div>
              </div>
            `;
          } else {
            return `<button class="media-btn" data-chap="${chap.name}" data-opt="${opt}">${opt}</button>`;
          }
        }).join('')}
      </div>
    `;
    sb.appendChild(capDiv);
  });
  $$('.chapter-title').forEach(title => {
    title.onclick = () => {
      $$('.chapter').forEach(x=>x.classList.remove('active'));
      $$('.chapter-menu').forEach(menu=>menu.style.display='none');
      const chapterDiv = title.closest('.chapter');
      chapterDiv.classList.add('active');
      chapterDiv.querySelector('.chapter-menu').style.display = 'flex';
    };
  });
  setTimeout(() => {
    $$('.media-btn').forEach(btn => {
      if(btn.classList.contains('struct-btn')) return; // ignorÄƒ butonul principal
      btn.onclick = (e) => {
        currentChap = btn.dataset.chap;
        currentOpt = btn.dataset.opt;
        currentType = btn.dataset.type || null;
        render();
      };
    });
  }, 0);
  $('#content').innerHTML = `<p style="font-size:1.2em;color:#888;text-align:center;margin-top:3em">SelecteazÄƒ un capitol È™i o opÈ›iune din stÃ¢nga pentru a Ã®ncepe.</p>`;
}
function render(){
  $('#summaryPage')?.classList.add('hidden');
  const c=$('#content');
  if(!currentOpt || !currentChap){ c.innerHTML=`<p>${LANG.select_ch}</p>`; return; }
  if(currentOpt === 'StructurÄƒ È™i obiective') {
    if(currentType === 'pdf') {
      renderPDF(c, currentChap);
    } else if(currentType === 'mp4') {
      renderVideo(c, currentChap, currentOpt);
    } else {
      c.innerHTML = `<p>SelecteazÄƒ PDF sau MP4.</p>`;
    }
  } else if(currentOpt === 'Teorie' || currentOpt === 'Aplicabilitate') {
    renderVideo(c, currentChap, currentOpt);
  } else if(currentOpt === 'Chestionar') {
    renderQuiz(c, currentChap);
  } else if(currentOpt === 'FiÈ™a personalÄƒ de evaluare') {
    renderProgress(c, currentChap);
  } else {
    c.innerHTML = `<p>OpÈ›iune necunoscutÄƒ.</p>`;
  }
}
function renderVideo(box, chap, opt){
  const capitolNr = chap.match(/\d+/)?.[0] || '1';
  let fileName = '';
  if(opt === 'StructurÄƒ È™i obiective') {
    fileName = `Modul_1_Capitolul_${capitolNr}_Structura.mp4`;
  } else if(opt === 'Teorie') {
    fileName = `Modul_1_Capitolul_${capitolNr}_Teorie.mp4`;
  } else if(opt === 'Aplicabilitate') {
    fileName = `Modul_1_Capitolul_${capitolNr}_Aplicabilitate.mp4`;
  }
  var videoPath = `../module/files/${fileName}`;
  box.innerHTML = `
    <h2>${chap} â€“ ${opt}</h2>
    <video id="videoViewer" controls style="width:100%;max-width:900px;display:block;margin:auto;border-radius:8px;background:#000;">
      <source src="${videoPath}" type="video/mp4">
      Browserul nu poate reda acest video.
    </video>
    <p style="margin-top:1em;color:#888">La selecÈ›ia acestei opÈ›iuni se va deschide fiÈ™ierul <b>${fileName}</b></p>
  `;
}
function renderPDF(box, chap) {
  const capitolNr = chap.match(/\d+/)?.[0] || '1';
  const fileName = `Modul_1_Capitolul_${capitolNr}_Structura.pdf`;
  box.innerHTML = `
    <h2>${chap} â€“ StructurÄƒ È™i obiective (PDF)</h2>
    <div id="pdfNav" style="margin:1em auto 1.5em auto; display:flex; justify-content:center; align-items:center; gap:1em; background:#eaf6ff; border-radius:8px; box-shadow:0 2px 8px #b3cdfa33; padding:.7em 1.5em; max-width:700px;">
      <button id="prevPageBtn" style="font-size:1.3em; background:#fff; color:#1976d2; border:2px solid #1976d2; border-radius:6px; padding:.3em 1em; cursor:pointer;">â¬…ï¸</button>
      <span id="pdfPageInfo" style="font-size:1.1em; font-weight:600; color:#1976d2;"></span>
      <button id="nextPageBtn" style="font-size:1.3em; background:#fff; color:#1976d2; border:2px solid #1976d2; border-radius:6px; padding:.3em 1em; cursor:pointer;">â¡ï¸</button>
    </div>
    <div style="display:flex; justify-content:center;">
      <canvas id="pdfViewer" style="background:#fff; border-radius:8px; box-shadow:0 2px 12px #b3cdfa33; margin-bottom:2em; max-width:100%;"></canvas>
    </div>
    <p style="margin-top:1em;color:#888">La selecÈ›ia acestei opÈ›iuni se va deschide fiÈ™ierul <b>${fileName}</b></p>
  `;
  setTimeout(() => {
    const url = `../module/files/${fileName}`;
    let pdfDoc = null,
        pageNum = 1,
        pageRendering = false,
        pageNumPending = null,
        scale = 1.2,
        canvas = document.getElementById('pdfViewer'),
        ctx = canvas.getContext('2d');
    function renderPage(num) {
      pageRendering = true;
      pdfDoc.getPage(num).then(function(page) {
        let viewport = page.getViewport({ scale: scale });
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        let renderContext = {
          canvasContext: ctx,
          viewport: viewport
        };
        let renderTask = page.render(renderContext);
        renderTask.promise.then(function() {
          pageRendering = false;
          if (pageNumPending !== null) {
            renderPage(pageNumPending);
            pageNumPending = null;
          }
        });
        document.getElementById('pdfPageInfo').textContent = `Pagina ${num} / ${pdfDoc.numPages}`;
      });
    }
    function queueRenderPage(num) {
      if (pageRendering) {
        pageNumPending = num;
      } else {
        renderPage(num);
      }
    }
    function onPrevPage() {
      if (pageNum <= 1) return;
      pageNum--;
      queueRenderPage(pageNum);
    }
    function onNextPage() {
      if (pageNum >= pdfDoc.numPages) return;
      pageNum++;
      queueRenderPage(pageNum);
    }
    document.getElementById('prevPageBtn').addEventListener('click', onPrevPage);
    document.getElementById('nextPageBtn').addEventListener('click', onNextPage);
    if(window.pdfjsLib) {
      window.pdfjsLib.getDocument(url).promise.then(function(pdfDoc_) {
        pdfDoc = pdfDoc_;
        document.getElementById('pdfPageInfo').textContent = `Pagina 1 / ${pdfDoc.numPages}`;
        renderPage(pageNum);
      });
    }
  }, 0);
}
const FISA_QUESTIONS = {
  'Capitolul 1': [
    'ÃnÈ›eleg structura È™i caracteristicile sistemului psihic uman È™i pot explica diferenÈ›a dintre psihologia generalÄƒ È™i psihologia medicalÄƒ.',
    'Cunosc È™i pot aplica metodele de bazÄƒ ale psihologiei (observaÈ›ie, interviu, anamnezÄƒ etc.) Ã®n activitatea medicalÄƒ.',
    'Pot identifica reacÈ›ii È™i comportamente psihice ale pacienÈ›ilor È™i le notez corect Ã®n fiÈ™a de observaÈ›ie.',
    'MÄƒ implic empatic Ã®n relaÈ›ia cu pacienÈ›ii È™i colaborez eficient cu echipa medicalÄƒ Ã®n sprijinul acestora.',
    'Recunosc procesele senzoriale È™i pot semnala tulburÄƒri precum halucinaÈ›ii, iluzii sau agnozie.',
    'Identific corect procesele cognitive superioare (gÃ¢ndire, memorie, atenÈ›ie etc.) È™i posibilele tulburÄƒri asociate.',
    'Adaptez comunicarea È™i comportamentul Ã®n funcÈ›ie de starea emoÈ›ionalÄƒ È™i cognitivÄƒ a pacientului.',
    'ÃnÈ›eleg importanÈ›a motivaÈ›iei, afectivitÄƒÈ›ii, voinÈ›ei È™i atenÈ›iei Ã®n comportamentul uman È™i Ã®n practica medicalÄƒ.',
    'Sunt capabil(Äƒ) sÄƒ observ È™i sÄƒ interpretez reacÈ›ii precum demotivarea, impulsivitatea sau dificultÄƒÈ›ile de concentrare.',
    'Ãmi evaluez Ã®n mod sincer capacitatea de concentrare, motivaÈ›ia È™i autocontrolul Ã®n timpul stagiului clinic.'
  ],
  'Capitolul 2': [
    'ÃnÈ›eleg ce sunt serviciile medicale È™i pot descrie componentele sistemului de sÄƒnÄƒtate.',
    'Cunosc rolul È™i responsabilitÄƒÈ›ile asistentului medical Ã®n diferite tipuri de unitÄƒÈ›i sanitare.',
    'Identific corect nevoile fundamentale ale pacientului È™i È™tiu sÄƒ le corelez cu intervenÈ›ii specifice.',
    'Aplic Ã®n mod corespunzÄƒtor tehnici de igienÄƒ, mobilizare, alimentaÈ›ie È™i eliminare, respectÃ¢nd siguranÈ›a pacientului.',
    'Monitorizez semnele vitale È™i Ã®nregistrez corect datele Ã®n fiÈ™a de observaÈ›ie.',
    'Cunosc cÄƒile de administrare a medicamentelor È™i pot explica avantajele È™i riscurile fiecÄƒreia.',
    'Respect paÈ™ii de administrare a tratamentelor È™i urmÄƒresc reacÈ›iile pacientului dupÄƒ administrare.',
    'Aplic corect procedurile de recoltare a probelor biologice È™i respect regulile de igienÄƒ È™i etichetare.',
    'PregÄƒtesc pacientul corespunzÄƒtor Ã®naintea tratamentului È™i comunic eficient Ã®n toate etapele.',
    'Supraveghez pacientul Ã®n timpul tratamentului È™i È™tiu cum sÄƒ acÈ›ionez Ã®n caz de reacÈ›ii adverse.'
  ],
  'Capitolul 3': [
    'Pot recunoaÈ™te È™i diferenÈ›ia tipurile de tuse, dispnee È™i expectoraÈ›ie, Ã®n funcÈ›ie de afecÈ›iunea respiratorie.',
    'Asociez simptomele caracteristice fiecÄƒrei boli respiratorii (ex: pleurezie, astm, tuberculozÄƒ) È™i È™tiu cÃ¢nd trebuie alertat personalul medical.',
    'Monitorizez corect T.A., pulsul, respiraÈ›ia È™i notez Ã®n fiÈ™a pacientului modificÄƒrile relevante.',
    'Identific simptomele specifice bolilor cardiovasculare È™i le corelez cu afecÈ›iuni precum cardiopatia ischemicÄƒ sau insuficienÈ›a cardiacÄƒ.',
    'Recunosc semnele digestive importante (icter, vÄƒrsÄƒturi, diaree) È™i le notez obiectiv Ã®n fiÈ™a de observaÈ›ie.',
    'Aplic mÄƒsuri de Ã®ngrijire potrivite pacientului cu dificultÄƒÈ›i respiratorii (poziÈ›ionare, oxigen, calmare).',
    'Respect regulile de igienÄƒ È™i protecÈ›ie la contactul cu pacienÈ›i cu boli contagioase sau digestive.',
    'Colaborez eficient cu echipa medicalÄƒ, semnalÃ¢nd orice agravare a stÄƒrii pacientului.',
    'Ofer sprijin fizic È™i emoÈ›ional pacienÈ›ilor cu afecÈ›iuni cronice sau simptomatologie severÄƒ.',
    'MÄƒ adaptez situaÈ›iilor clinice È™i sprijin pacientul Ã®n alimentaÈ›ie, hidratare È™i menÈ›inerea confortului.'
  ]
};
function renderProgress(box){
  const fisaQuestions = FISA_QUESTIONS[currentChap] || [
    `${currentChap}: Ãntrebare 1 fiÈ™Äƒ?`,
    `${currentChap}: Ãntrebare 2 fiÈ™Äƒ?`
  ];
  box.innerHTML = `
    <div class="frame">
      <h2 style="margin-bottom:.3em">FiÈ™a personalÄƒ de evaluare â€“ ${currentChap}</h2>
      <form id="progresForm">
        <table style="width:100%;border-collapse:collapse;margin-bottom:1em;">
          <thead>
            <tr style="background:#eaf6ff;">
              <th style="padding:.5em;border:1px solid #b3cdfa;">CompleteazÄƒ bifa corespunzÄƒtoare pentru fiecare activitate:</th>
              <th style="padding:.5em;border:1px solid #b3cdfa;">Da</th>
              <th style="padding:.5em;border:1px solid #b3cdfa;">ParÈ›ial</th>
              <th style="padding:.5em;border:1px solid #b3cdfa;">Nu</th>
              <th style="padding:.5em;border:1px solid #b3cdfa;">ObservaÈ›ii (max 50 caractere)</th>
            </tr>
          </thead>
          <tbody>
            ${fisaQuestions.map((q, i) => `
              <tr>
                <td style="padding:.5em;border:1px solid #b3cdfa;">${q}</td>
                <td style="text-align:center;border:1px solid #b3cdfa;"><input type="radio" name="q${i}" value="Da" required></td>
                <td style="text-align:center;border:1px solid #b3cdfa;"><input type="radio" name="q${i}" value="ParÈ›ial"></td>
                <td style="text-align:center;border:1px solid #b3cdfa;"><input type="radio" name="q${i}" value="Nu"></td>
                <td style="border:1px solid #b3cdfa;"><input type="text" name="obs${i}" maxlength="50" style="width:98%;padding:.3em;border-radius:4px;border:1px solid #b3cdfa;"></td>
              </tr>
            `).join('')}
          </tbody>
        </table>
        <button type="submit">SalveazÄƒ fiÈ™a</button>
      </form>
      <div id="progresMsg" style="margin-top:1em;color:var(--clr-main);font-weight:500;"></div>
      <button id="redoFisaBtn" style="display:none;margin-top:1.5em;background:#fff;color:var(--clr-main);border:2px solid var(--clr-main);font-weight:600;padding:.6em 1.2em;border-radius:6px;">CompleteazÄƒ din nou</button>
      <div id="fisaModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.35);z-index:1000;align-items:center;justify-content:center;">
        <div style="background:#fff;color:#222;padding:2em 2.5em;border-radius:12px;max-width:700px;width:95vw;box-shadow:0 8px 32px rgba(0,0,0,0.18);position:relative;">
          <button id="closeFisaModal" style="position:absolute;top:1em;right:1em;font-size:1.3em;background:none;border:none;color:#888;cursor:pointer;">&times;</button>
          <div id="fisaModalContent"></div>
        </div>
      </div>
    </div>
  `;
  document.getElementById('progresForm').onsubmit = function(e){
    e.preventDefault();
    const data = {};
    const prenume = document.getElementById('prenume')?.value || '';
    const nume = document.getElementById('nume')?.value || '';
    const email = document.getElementById('email')?.value || '';
    fisaQuestions.forEach((q, i) => {
      const radios = this.querySelectorAll('input[name="q'+i+'"]');
      let selected = '';
      radios.forEach(r => { if(r.checked) selected = r.value; });
      data['q'+i] = selected;
      data['obs'+i] = this['obs'+i].value;
    });
    const fisaHTML = `
      <div style="margin-bottom:1em;font-size:1.08em;">
        <strong>Nume:</strong> <span style="color:var(--clr-main)">${nume}</span> &nbsp; 
        <strong>Prenume:</strong> <span style="color:var(--clr-main)">${prenume}</span> &nbsp; 
        <strong>Email:</strong> <span style="color:var(--clr-main)">${email}</span>
      </div>
      <table style="width:100%;border-collapse:collapse;">
        <thead>
          <tr style="background:#b3cdfa;">
            <th style="padding:.5em;border:1px solid #b3cdfa;">Ãntrebare</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">RÄƒspuns</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">ObservaÈ›ii</th>
          </tr>
        </thead>
        <tbody>
          ${fisaQuestions.map((q, i) => `
            <tr>
              <td style="padding:.5em;border:1px solid #b3cdfa;">${q}</td>
              <td style="text-align:center;border:1px solid #b3cdfa;">${data['q'+i]}</td>
              <td style="border:1px solid #b3cdfa;">${data['obs'+i] ? data['obs'+i] : '-'}</td>
            </tr>
          `).join('')}
        </tbody>
      </table>
    `;
    document.getElementById('fisaModalContent').innerHTML = "<h3 style='margin-top:0'>FiÈ™a personalÄƒ completatÄƒ</h3>" + fisaHTML;
    document.getElementById('fisaModal').style.display = 'flex';
    document.getElementById('redoFisaBtn').style.display = 'inline-block';
    document.getElementById('progresMsg').innerHTML = '<span style="color:var(--clr-main);font-weight:500;">FiÈ™a a fost salvatÄƒ!</span>';
    Array.from(this.querySelectorAll('input, button')).forEach(el => el.disabled = true);
    document.getElementById('closeFisaModal').onclick = function() {
      document.getElementById('fisaModal').style.display = 'none';
    };
    document.getElementById('redoFisaBtn').onclick = function() {
      document.getElementById('progresForm').reset();
      Array.from(document.getElementById('progresForm').querySelectorAll('input, button')).forEach(el => el.disabled = false);
      document.getElementById('progresForm').style.display = '';
      document.getElementById('fisaModal').style.display = 'none';
      document.getElementById('redoFisaBtn').style.display = 'none';
      document.getElementById('progresMsg').innerHTML = '';
    };
  };
}
// ===== QUIZZES STRUCTURE =====
const QUIZZES = {};
STRUCTURE.forEach(chapObj => {
  QUIZZES[chapObj.name] = { q: [], idx: 0, score: 0, res: [] };
});
QUIZZES['Capitolul 1'].q = [
  {
    t:'Ce caracteristicÄƒ a sistemului psihic reflectÄƒ faptul cÄƒ fiecare persoanÄƒ reacÈ›ioneazÄƒ diferit la aceeaÈ™i situaÈ›ie?',
    o:['Este organizat','Este dinamic','Este unic','Este voluntar'],
    a:'Este unic',
    e:'Fiecare individ reacÈ›ioneazÄƒ diferit deoarece sistemul psihic este unic.'
  },
  {
    t:'Metoda care presupune urmÄƒrirea comportamentului?',
    o:['Convorbirea','ObservaÈ›ia','Ancheta','Psihometria'],
    a:'ObservaÈ›ia',
    e:'ObservaÈ›ia presupune urmÄƒrirea atentÄƒ a comportamentului pacientului.'
  },
  {
    t:'Care dintre urmÄƒtoarele este o tulburare senzorialÄƒ?',
    o:['Amnezie','HalucinaÈ›ie','Abulie','Afazie'],
    a:'HalucinaÈ›ie',
    e:'HalucinaÈ›ia este o percepÈ›ie falsÄƒ, o tulburare senzorialÄƒ.'
  },
  {
    t:'Ce proces psihic superior permite reÈ›inerea È™i redarea informaÈ›iilor?',
    o:['GÃ¢ndirea','ImaginaÈ›ia','Memoria','AtenÈ›ia'],
    a:'Memoria',
    e:'Memoria este responsabilÄƒ de stocarea È™i reamintirea informaÈ›iilor.'
  },
  {
    t:'Ce tip de motivaÈ›ie vine din dorinÈ›a de a face un lucru din convingere personalÄƒ?',
    o:['ExtrinsecÄƒ','PasivÄƒ','ActivÄƒ','IntrinsecÄƒ'],
    a:'IntrinsecÄƒ',
    e:'MotivaÈ›ia intrinsecÄƒ vine din interior, fÄƒrÄƒ influenÈ›e externe.'
  },
  {
    t:'Ce emoÈ›ie este un exemplu de manifestare afectivÄƒ de scurtÄƒ duratÄƒ?',
    o:['Respectul','Furia','Iubirea','Depresia'],
    a:'Furia',
    e:'Furia este o emoÈ›ie intensÄƒ, dar de scurtÄƒ duratÄƒ.'
  },
  {
    t:'Care este prima etapÄƒ Ã®n structura voinÈ›ei?',
    o:['Decizia','SusÈ›inerea efortului','Finalizarea acÈ›iunii','Alegerea scopului'],
    a:'Alegerea scopului',
    e:'Orice acÈ›iune voluntarÄƒ Ã®ncepe cu alegerea unui scop'
  },
  {
    t:'Cum se numeÈ™te capacitatea de a te concentra activ asupra unui obiect?',
    o:['Memorie','ImaginaÈ›ie','AtenÈ›ie','PercepÈ›ie'],
    a:'AtenÈ›ie',
    e:'AtenÈ›ia presupune orientarea È™i menÈ›inerea conÈ™tientÄƒ a concentrÄƒrii.'
  },
  {
    t:'Ce exemplu din practicÄƒ indicÄƒ o posibilÄƒ tulburare de gÃ¢ndire?',
    o:['Pacientul spune cÄƒ medicul e robot extraterestru','Pacientul uitÄƒ ce zi este','Pacientul nu recunoaÈ™te o ceaÈ™cÄƒ de ceai','Pacientul repetÄƒ Ã®ntrebarea de mai multe ori'],
    a:'Pacientul spune cÄƒ medicul e robot extraterestru',
    e:'Delirul este o tulburare de gÃ¢ndire â€“ afirmaÈ›ia indicÄƒ delir'
  },
  {
    t:'Ce tulburare se manifestÄƒ prin pierderea capacitÄƒÈ›ii de exprimare verbalÄƒ?',
    o:['Hipoprosexie','Anhedonie','Afazie','Agnozie'],
    a:'Afazie',
    e:'Afazia afecteazÄƒ exprimarea È™i Ã®nÈ›elegerea limbajului verbal.'
  }
];
QUIZZES['Capitolul 2'].q = [
  {
    t:'Ce reprezintÄƒ serviciile medicale?',
    o:['ActivitÄƒÈ›i de recreere pentru pacienÈ›i','IntervenÈ›ii chirurgicale de urgenÈ›Äƒ','ActivitÄƒÈ›i organizate pentru menÈ›inerea È™i Ã®mbunÄƒtÄƒÈ›irea sÄƒnÄƒtÄƒÈ›ii','Transportul pacienÈ›ilor Ã®ntre spitale'],
    a:'ActivitÄƒÈ›i organizate pentru menÈ›inerea È™i Ã®mbunÄƒtÄƒÈ›irea sÄƒnÄƒtÄƒÈ›ii',
    e:'Serviciile medicale sunt definite ca activitÄƒÈ›i organizate pentru menÈ›inerea, restabilirea sau Ã®mbunÄƒtÄƒÈ›irea stÄƒrii de sÄƒnÄƒtate.'
  },
  {
    t:'Care este rolul asistentului medical Ã®n echipa de Ã®ngrijire?',
    o:['Prescrierea tratamentelor','Aplicarea tehnicilor de bazÄƒ È™i monitorizarea pacientului','Eliberarea de bilete de trimitere','Ãntocmirea fiÈ™ei de internare'],
    a:'Aplicarea tehnicilor de bazÄƒ È™i monitorizarea pacientului',
    e:'Asistentul medical are rolul de a aplica tehnici de Ã®ngrijire, de a supraveghea pacientul È™i de a susÈ›ine comunicarea Ã®n echipÄƒ.'
  },
  {
    t:'Care dintre urmÄƒtoarele reprezintÄƒ o nevoie fundamentale?',
    o:['Nevoia de a socializa online','Nevoia de a respecta un regim estetic','Nevoia de a respira È™i de a avea o circulaÈ›ie adecvatÄƒ','Nevoia de a citi zilnic'],
    a:'Nevoia de a respira È™i de a avea o circulaÈ›ie adecvatÄƒ',
    e:'RespiraÈ›ia È™i circulaÈ›ia sunt nevoi fiziologice fundamentale esenÈ›iale pentru viaÈ›Äƒ.'
  },
  {
    t:'Care este cea mai frecventÄƒ cale de administrare a medicamentelor?',
    o:['RectalÄƒ','IntravenoasÄƒ','OralÄƒ','Inhalatorie'],
    a:'OralÄƒ',
    e:'Calea oralÄƒ este cea mai simplÄƒ È™i frecvent utilizatÄƒ metodÄƒ de administrare a medicamentelor.'
  },
  {
    t:'Ce presupune recoltarea corectÄƒ a urinei pentru uroculturÄƒ?',
    o:['Se colecteazÄƒ Ã®n orice recipient curat','Se recolteazÄƒ fÄƒrÄƒ igienÄƒ prealabilÄƒ','Se recolteazÄƒ mijlocul jetului urinar Ã®ntr-un recipient steril','Se adaugÄƒ apÄƒ pentru volum'],
    a:'Se recolteazÄƒ mijlocul jetului urinar Ã®ntr-un recipient steril',
    e:'Pentru uroculturÄƒ, se recolteazÄƒ mijlocul jetului urinar Ã®ntr-un recipient steril, dupÄƒ igienÄƒ localÄƒ.'
  },
  {
    t:'Ce trebuie fÄƒcut Ã®n cazul apariÈ›iei unei reacÈ›ii adverse Ã®n timpul unei perfuzii?',
    o:['Se continuÄƒ perfuzia pÃ¢nÄƒ la final','Se ignorÄƒ È™i se monitorizeazÄƒ pacientul ulterior','Se opreÈ™te perfuzia È™i se anunÈ›Äƒ personalul medical','Se administreazÄƒ calmante fÄƒrÄƒ prescripÈ›ie'],
    a:'Se opreÈ™te perfuzia È™i se anunÈ›Äƒ personalul medical',
    e:'Ãn caz de reacÈ›ie adversÄƒ, se opreÈ™te perfuzia imediat È™i se informeazÄƒ personalul medical responsabil.'
  },
  {
    t:'Ce Ã®nseamnÄƒ supravegherea pacientului Ã®n timpul tratamentului?',
    o:['A verifica doar dacÄƒ pacientul a luat tratamentul','A urmÄƒri reacÈ›iile pacientului È™i a evalua semnele vitale','A discuta cu familia pacientului','A colecta fiÈ™a pacientului dupÄƒ tratament'],
    a:'A urmÄƒri reacÈ›iile pacientului È™i a evalua semnele vitale',
    e:'Supravegherea presupune observarea continuÄƒ a pacientului È™i evaluarea semnelor vitale Ã®n timpul tratamentului.'
  },
  {
    t:'Ce include notarea corectÄƒ a reacÈ›iilor pacientului Ã®n fiÈ™a de tratament?',
    o:['Opinia personalÄƒ despre pacient','Simptome observate È™i acÈ›iuni Ã®ntreprinse','Date personale ale asistentului','Comentarii despre rudele pacientului'],
    a:'Simptome observate È™i acÈ›iuni Ã®ntreprinse',
    e:'Notarea corectÄƒ presupune menÈ›ionarea obiectivÄƒ a reacÈ›iilor pacientului È™i a mÄƒsurilor luate.'
  },
  {
    t:'Ce se utilizeazÄƒ pentru recoltarea sputei la pacient?',
    o:['Recipient nesteril, dupÄƒ ce pacientul a mÃ¢ncat','Recipient steril, dimineaÈ›a pe nemÃ¢ncate','Orice pahar curat','Recipient de urinÄƒ'],
    a:'Recipient steril, dimineaÈ›a pe nemÃ¢ncate',
    e:'Sputa se recolteazÄƒ dimineaÈ›a, pe nemÃ¢ncate, Ã®ntr-un recipient steril, pentru a evita contaminarea.'
  },
  {
    t:'Ce principiu se aplicÄƒ Ã®n administrarea medicamentelor injectabile?',
    o:['Administrarea se face fÄƒrÄƒ a anunÈ›a pacientul','Se ignorÄƒ reacÈ›iile locale','Se respectÄƒ doza, calea È™i ora indicatÄƒ de prescripÈ›ie','Se administreazÄƒ Ã®n funcÈ›ie de preferinÈ›ele pacientului'],
    a:'Se respectÄƒ doza, calea È™i ora indicatÄƒ de prescripÈ›ie',
    e:'Respectarea prescripÈ›iei medicului â€“ dozÄƒ, orÄƒ, cale â€“ este fundamentalÄƒ Ã®n administrarea medicamentelor injectabile.'
  }
];
QUIZZES['Capitolul 3'].q = [
  {
    t:'Care dintre urmÄƒtoarele simptome este specific astmului bronÈ™ic?',
    o:['Durere toracicÄƒ accentuatÄƒ la inspiraÈ›ie','Tuse productivÄƒ cu febrÄƒ mare','Tuse seacÄƒ, dispnee È™i wheezing','Hemoptizie È™i icter'],
    a:'Tuse seacÄƒ, dispnee È™i wheezing',
    e:'Tusea seacÄƒ, dispneea È™i wheezing-ul sunt caracteristice crizei de astm bronÈ™ic.'
  },
  {
    t:'Ce simptom diferenÈ›iazÄƒ tuberculoza de celelalte boli respiratorii?',
    o:['Wheezing','Tuse productivÄƒ cu secreÈ›ii purulente','Tuse persistentÄƒ cu hemoptizie È™i transpiraÈ›ii nocturne','Durere toracicÄƒ la inspiraÈ›ie'],
    a:'Tuse persistentÄƒ cu hemoptizie È™i transpiraÈ›ii nocturne',
    e:'Tuberculoza se manifestÄƒ prin tuse cronicÄƒ, hemoptizie, scÄƒdere ponderalÄƒ È™i transpiraÈ›ii nocturne.'
  },
  {
    t:'Ce mÄƒsurÄƒ este indicatÄƒ Ã®n Ã®ngrijirea pacientului cu pleurezie?',
    o:['Mobilizare frecventÄƒ','PoziÈ›ie clinostaticÄƒ','PoziÈ›ie semisezÃ¢ndÄƒ È™i repaus','ExerciÈ›ii respiratorii active'],
    a:'PoziÈ›ie semisezÃ¢ndÄƒ È™i repaus',
    e:'PoziÈ›ia semisezÃ¢ndÄƒ ajutÄƒ la reducerea disconfortului È™i Ã®mbunÄƒtÄƒÈ›irea respiraÈ›iei.'
  },
  {
    t:'Care este combinaÈ›ia tipicÄƒ de simptome Ã®n insuficienÈ›a cardiacÄƒ?',
    o:['Durere toracicÄƒ È™i hipertensiune','Dispnee, edeme gambiere È™i fatigabilitate','PalpitaÈ›ii È™i ameÈ›eli','Tuse uscatÄƒ È™i febrÄƒ'],
    a:'Dispnee, edeme gambiere È™i fatigabilitate',
    e:'Dispneea, edemele È™i oboseala sunt semne clasice de insuficienÈ›Äƒ cardiacÄƒ.'
  },
  {
    t:'Ce simptom este specific unui episod de anginÄƒ pectoralÄƒ?',
    o:['Dispnee severÄƒ la repaus','Durere toracicÄƒ constrictivÄƒ la efort','Tuse productivÄƒ cu febrÄƒ','PalpitaÈ›ii cu sincopÄƒ'],
    a:'Durere toracicÄƒ constrictivÄƒ la efort',
    e:'Angina pectoralÄƒ se manifestÄƒ prin durere toracicÄƒ de tip constrictiv, declanÈ™atÄƒ la efort.'
  },
  {
    t:'Ce simptom este semn de agravare Ã®n pancreatitÄƒ acutÄƒ?',
    o:['GreaÈ›Äƒ dupÄƒ masÄƒ','Durere epigastricÄƒ uÈ™oarÄƒ','Durere intensÄƒ Ã®n barÄƒ È™i vÄƒrsÄƒturi persistente','Balonare moderatÄƒ'],
    a:'Durere intensÄƒ Ã®n barÄƒ È™i vÄƒrsÄƒturi persistente',
    e:'Pancreatita acutÄƒ se manifestÄƒ prin durere abdominalÄƒ severÄƒ, vÄƒrsÄƒturi È™i semne de alterare a stÄƒrii generale.'
  },
  {
    t:'Ce simptom este sugestiv pentru hepatitÄƒ viralÄƒ?',
    o:['Tuse persistentÄƒ È™i febrÄƒ','Icter, urinÄƒ Ã®nchisÄƒ la culoare È™i inapetenÈ›Äƒ','Durere Ã®n hipogastru È™i diaree','Hemoptizie È™i febrÄƒ'],
    a:'Icter, urinÄƒ Ã®nchisÄƒ la culoare È™i inapetenÈ›Äƒ',
    e:'Hepatita viralÄƒ se manifestÄƒ prin icter, urinÄƒ hipercromÄƒ È™i stare generalÄƒ alteratÄƒ.'
  },
  {
    t:'Ce mÄƒsurÄƒ este adecvatÄƒ Ã®n Ã®ngrijirea pacientului cu sindrom diareic?',
    o:['Mobilizare imediatÄƒ','Administrarea de aliment solid','Rehidratare È™i monitorizarea scaunelor','ExerciÈ›ii fizice zilnice'],
    a:'Rehidratare È™i monitorizarea scaunelor',
    e:'Ãn sindromul diareic, prioritare sunt hidratarea È™i observarea frecvenÈ›ei scaunelor.'
  },
  {
    t:'Ce manifestare necesitÄƒ alertarea imediatÄƒ a echipei medicale?',
    o:['Tuse uscatÄƒ intermitentÄƒ','ScÄƒderea apetitului','Hemoptizie È™i dificultÄƒÈ›i respiratorii','Durere uÈ™oarÄƒ la nivel epigastric'],
    a:'Hemoptizie È™i dificultÄƒÈ›i respiratorii',
    e:'Hemoptizia È™i dispneea severÄƒ pot indica o urgenÈ›Äƒ medicalÄƒ (ex. tuberculozÄƒ activÄƒ sau embolism).'
  },
  {
    t:'Ce simptom diferÄƒ Ã®ntre gastritÄƒ È™i hepatitÄƒ?',
    o:['GreaÈ›a','Durerea epigastricÄƒ','Icterul','VÄƒrsÄƒturile'],
    a:'Icterul',
    e:'Icterul este caracteristic hepatitei, nu apare Ã®n gastritÄƒ.'
  }
];

function renderQuiz(box, chap) {
  questions = QUIZZES[chap]?.q || [];
  qIndex = 0;
  answers = Array(questions.length).fill(null);
  box.innerHTML = `
    <h2>Chestionar â€“ ${chap}</h2>
    <div id="progressBar"><div id="progressFill"></div></div>
    <div id="quizPages"></div>
    <div style="margin-top:1em">
      <button id="backBtn" style="display:none">${LANG.back}</button>
      <button id="nextBtn">${LANG.next}</button>
    </div>
    <div style="margin-top:.7em;font-size:.95em;color:var(--clr-accent)"><span id="infoTimer">00:00</span></div>
  `;
  showQuestionPage(qIndex);
  updateProgress();
}
function showQuestionPage(i){
  const q = questions[i];
  const cont = $('#quizPages');
  cont.innerHTML = `
    <p><strong>Ãntrebarea ${i+1} / ${questions.length}</strong><br>${q.t}</p>
    ${q.o.map(o=>`<label><input type=\"radio\" name=\"q${i}\" value=\"${o}\"> ${o}</label><br>`).join('')}
    <div id=\"feed${i}\" class=\"result-inline\"></div>
  `;
  $('#backBtn').style.display = i ? 'inline-block' : 'none';
  const nextBtn = $('#nextBtn');
  nextBtn.textContent = i < questions.length-1 ? LANG.next : 'Finalizare';
  nextBtn.disabled = answers[i] ? false : true;
  // PreselecteazÄƒ rÄƒspunsul anterior dacÄƒ existÄƒ
  if(answers[i]) {
    const inp = cont.querySelector(`input[name="q${i}"][value="${answers[i]}"]`);
    if(inp) inp.checked = true;
    // AfiÈ™eazÄƒ feedback
    const feed = $('#feed'+i);
    if(answers[i] === q.a) {
      feed.innerHTML = '<span style="color:green;font-weight:bold">CORECT</span>';
    } else {
      feed.innerHTML = `<span style=\"color:red;font-weight:bold\">INCORECT</span> <span style=\"color:#444\">RÄƒspuns corect: <b>${q.a}</b></span><br><span style=\"color:#1976d2;font-size:.98em\"><em>${q.e}</em></span>`;
    }
    cont.querySelectorAll(`input[name="q${i}"]`).forEach(r => r.disabled = true);
  }
  // Feedback instant cu salvare rÄƒspuns
  cont.querySelectorAll(`input[name="q${i}"]`).forEach(inp => {
    inp.onclick = function() {
      answers[i] = this.value;
      const feed = $('#feed'+i);
      if(this.value === q.a) {
        feed.innerHTML = '<span style="color:green;font-weight:bold">CORECT</span>';
      } else {
        feed.innerHTML = `<span style=\"color:red;font-weight:bold\">INCORECT</span> <span style=\"color:#444\">RÄƒspuns corect: <b>${q.a}</b></span><br><span style=\"color:#1976d2;font-size:.98em\"><em>${q.e}</em></span>`;
      }
      cont.querySelectorAll(`input[name="q${i}"]`).forEach(r => r.disabled = true);
      nextBtn.disabled = false;
    };
  });
  // La click pe [Ãnapoi], dezactiveazÄƒ opÈ›iunile
  $('#backBtn').onclick = () => {
    if(i>0){
      qIndex--;
      showQuestionPage(qIndex);
      updateProgress();
      $('#quizPages').querySelectorAll(`input[name="q${qIndex}"]`).forEach(r => r.disabled = true);
      $('#nextBtn').disabled = answers[qIndex] ? false : true;
    }
  };
  // La click pe [UrmÄƒtoarea Ã®ntrebare] sau [Finalizare]
  nextBtn.onclick = () => {
    if(i < questions.length-1){
      qIndex++;
      showQuestionPage(qIndex);
      updateProgress();
    } else {
      showSummary();
    }
  };
}
function startTimer(){
  timer=0;
  timerID=setInterval(()=>{
    timer++;
    $('#infoTimer').textContent=fmtTime(timer);
  },1000);
}
function nextQ(idx) {
  const sel = document.querySelector(`input[name="q${idx}"]:checked`);
  const feed = $(`#feed${idx}`);
  if (!sel) { feed.innerHTML = `<span class="incorrect">${LANG.choose}</span>`; return; }
  $$(`input[name="q${idx}"]`).forEach(r => r.disabled = true);
  const q = questions[idx];
  const ok = sel.value === q.a;
  feed.innerHTML = ok
    ? `<span class="correct">${LANG.ok}</span>`
    : `<span class="incorrect">${LANG.nok} <strong>${q.a}</strong><br><em>${q.e}</em></span>`;
  ok ? $('#snd-ok').play() : $('#snd-nok').play();
  $$('#backBtn')[idx].style.display = 'inline-block';
  if (idx === questions.length - 1) { setTimeout(showSummary, 1200); return; }
  setTimeout(() => {
    $$('.question-page')[idx].classList.remove('active');
    $$('.question-page')[idx].style.display = 'none';
    $$('.question-page')[idx + 1].classList.add('active');
    $$('.question-page')[idx + 1].style.display = '';
    qIndex = idx + 1;
    updateProgress();
  }, 1200);
}
function prevQ(idx) {
  if (idx > 0) {
    $$('.question-page')[idx].classList.remove('active');
    $$('.question-page')[idx].style.display = 'none';
    $$('.question-page')[idx - 1].classList.add('active');
    $$('.question-page')[idx - 1].style.display = '';
    qIndex = idx - 1;
    updateProgress();
    $$('#backBtn')[idx - 1].style.display = qIndex ? 'inline-block' : 'none';
  }
}
function updateProgress() {
  $('#progressFill').style.width = ((qIndex + 1) / questions.length * 100) + '%';
}
function showSummary(){
  clearInterval(timerID);
  const user=sessionStorage.getItem('user')||($('#prenume').value+' '+$('#nume').value)||'';
  const email=$('#email').value||'';
  const dur=fmtTime(timer);
  const data=new Date().toLocaleString();
  let correct=0;
  let total=questions.length;
  let pct=0;
  let rows=questions.map((q,i)=>{
    const ans=answers[i]||'';
    const ok=ans===q.a;
    if(ok) correct++;
    return `
      <tr>
        <td>${i+1}</td>
        <td>${q.t}</td>
        <td style="color:${ok?'green':'red'}">${ans||'-'}</td>
        <td>${q.a}</td>
        <td>${ok?'âœ”ï¸':'âŒ'}</td>
      </tr>`;
  }).join('');
  pct=Math.round(correct/total*100);
  const verdict=pct>=80?LANG.admitted:LANG.rejected;
  $('#content').innerHTML=`
    <div class="frame">
      <h3>FiÈ™Äƒ personalizatÄƒ â€“ Rezultate chestionar</h3>
      <div style="margin-bottom:1em;font-size:1.08em;">
        <strong>Nume:</strong> <span style="color:var(--clr-main)">${user}</span> &nbsp; 
        <strong>Email:</strong> <span style="color:var(--clr-main)">${email}</span> &nbsp; 
        <strong>Data:</strong> <span style="color:var(--clr-main)">${data}</span> &nbsp; 
        <strong>Durata:</strong> <span style="color:var(--clr-main)">${dur}</span>
      </div>
      <table style="width:100%;border-collapse:collapse;margin-bottom:1em;">
        <thead>
          <tr style="background:#eaf6ff;">
            <th style="padding:.5em;border:1px solid #b3cdfa;">#</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">Ãntrebare</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">RÄƒspuns dat</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">RÄƒspuns corect</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">Statut</th>
          </tr>
        </thead>
        <tbody>${rows}</tbody>
      </table>
      <div style="font-size:1.1em;margin-bottom:1em;"><strong>Punctaj:</strong> ${correct} / ${total} (${pct}%)</div>
      <div style="font-size:1.1em;margin-bottom:1em;"><strong>Rezultat:</strong> <span style="color:${verdict==LANG.admitted?'green':'red'}">${verdict}</span></div>
      <button onclick="location.reload()">${LANG.reset}</button>
    </div>`;
}

window.onload = buildSidebar;
</script>
</body>
</html>