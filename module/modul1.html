<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8"/>
  <title>Modul 1 ‚Äì Asistent medical balneofiziokinetoterapie ≈üi recuperare-Anul 1</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="icon" href="data:,"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <style>
    :root {
      --clr-main: #589edf;
      --clr-accent: #1976d2;
      --clr-bg: #f0f4f7;
      --clr-bg-dark: #23272f;
      --clr-text: #333;
      --clr-error: #d62828;
      --radius: 10px;
      --shadow: 0 2px 12px rgba(89,158,223,0.13);
      --font: 'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
    }
    body {
      margin: 0;
      font-family: var(--font);
      background: var(--clr-bg);
      color: var(--clr-text);
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1em 2em;
      background: var(--clr-main);
      color: #fff;
      box-shadow: var(--shadow);
    }
    header h1 {
      font-size: 1.5em;
      margin: 0 1em;
      font-weight: 600;
      letter-spacing: 1px;
    }
    header form {
      display: flex;
      gap: .5em;
      flex-wrap: wrap;
    }
    header input {
      padding: .5em;
      border-radius: var(--radius);
      border: none;
      font-size: 1em;
      background: #fff;
      color: var(--clr-text);
      box-shadow: 0 1px 4px #b3cdfa33;
    }
    header button {
      background: var(--clr-accent);
      color: #fff;
      border-radius: var(--radius);
      padding: .5em 1.2em;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: background .2s, transform .2s;
    }
    header button:hover {
      background: #1565c0;
      transform: translateY(-2px);
    }
    main {
      display: flex;
      gap: 2em;
      padding: 2em;
      max-width: 1200px;
      margin: auto;
    }
    aside#sidebar {
      width: 320px;
      background: #fff;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1.5em 1em;
      min-height: 500px;
    }
    .chapter {
      margin-bottom: 1.2em;
    }
    .chapter-title {
      font-weight: 700;
      font-size: 1.15em;
      color: var(--clr-main);
      margin-bottom: .3em;
      cursor: pointer;
      padding: .4em .7em;
      border-radius: var(--radius);
      transition: background .2s;
    }
    .chapter-title:hover {
      background: #eaf6ff;
    }
    .chapter.active > .chapter-title {
      background: var(--clr-accent);
      color: #fff;
    }
    .chapter-menu {
      display: flex;
      flex-direction: column;
      gap: .5em;
      margin-left: .7em;
      margin-top: .3em;
    }
    .media-btn {
      background: #eaf6ff;
      color: var(--clr-accent);
      border: 2px solid var(--clr-accent);
      font-weight: 600;
      font-size: 1em;
      padding: .6em 1.2em;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      transition: background .2s, color .2s, border .2s, transform .2s;
      cursor: pointer;
    }
    .media-btn:hover, .media-btn.active {
      background: var(--clr-accent);
      color: #fff;
      border-color: var(--clr-accent);
      transform: translateY(-2px) scale(1.04);
    }
    section#content {
      flex: 1;
      background: #fff;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 2em 2em 2em 2em;
      min-height: 500px;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      justify-content: flex-start;
    }
    .frame {
      background: #f8fbff;
      padding: 2em;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      max-width: 900px;
      margin: 2em auto;
    }
    .hidden { display: none; }
    @media (max-width: 900px) {
      main { flex-direction: column; gap: 1em; padding: 1em; }
      aside#sidebar { width: 100%; min-height: unset; }
      section#content { padding: 1em; }
    }
    @media (max-width: 600px) {
      header { flex-direction: column; gap: 1em; padding: 1em; }
      main { padding: .5em; }
      .frame { padding: 1em; }
    }
    .pdf-btn {
      background: #fff0f0 !important;
      border-color: #d62828 !important;
    }
    .pdf-btn:hover {
      background: #d62828 !important;
      color: #fff !important;
    }
    .mp4-btn {
      background: #e8f5e9 !important;
      border-color: #388e3c !important;
    }
    .mp4-btn:hover {
      background: #388e3c !important;
      color: #fff !important;
    }
  </style>
</head>
<body>
<header>
  <button onclick="location.href='../Index.html'">‚üµ √énapoi la Index</button>
  <h1>Modul 1 ‚Äì Asistent medical balneofiziokinetoterapie ≈üi recuperare - Anul 1</h1>
  <form id="userForm">
    <input id="prenume" placeholder="Prenume" required>
    <input id="nume"   placeholder="Nume"   required>
    <input id="email"  placeholder="Email" type="email" required>
    <button>SalveazƒÉ</button>
  </form>
  <button id="toggleTheme">üåô/‚òÄÔ∏è</button>
</header>
<main>
  <aside id="sidebar"></aside>
  <section id="content">SelecteazƒÉ un capitol‚Ä¶</section>
</main>
<audio id="snd-ok" src="" preload="auto"></audio>
<audio id="snd-nok" src="" preload="auto"></audio>
<script type="module">
// ===== CONFIG =====
const LANG = {
  select_ch:'SelecteazƒÉ un capitol‚Ä¶',
  saved:'Salvat',
  pdf:'PDF',
  video:'VIDEO',
  timer:'Timp',
  next:'UrmƒÉtoarea √Æntrebare',
  back:'√énapoi',
  choose:'‚ö†Ô∏è Alege un rƒÉspuns!',
  ok:'‚úîÔ∏è Corect!',
  nok:'‚ùå Incorect. Corect:',
  summary_title:'Fi»ôƒÉ de evaluare',
  user:'Utilizator',
  email:'Email',
  date:'Data completƒÉrii',
  duration:'Durata',
  correct:'Corecte',
  incorrect:'Incorecte',
  score:'Scor',
  result:'Rezultat',
  admitted:'Admis',
  rejected:'Respins',
  reset:'Reset'
};
const STRUCTURE = [
  {
    name: 'Capitolul 1',
    options: [
      'StructurƒÉ »ôi obiective',
      'Teorie',
      'Aplicabilitate',
      'Chestionar',
      'Fi»ôa personalƒÉ de evaluare'
    ]
  },
  {
    name: 'Capitolul 2',
    options: [
      'StructurƒÉ »ôi obiective',
      'Teorie',
      'Aplicabilitate',
      'Chestionar',
      'Fi»ôa personalƒÉ de evaluare'
    ]
  },
  {
    name: 'Capitolul 3',
    options: [
      'StructurƒÉ »ôi obiective',
      'Teorie',
      'Aplicabilitate',
      'Chestionar',
      'Fi»ôa personalƒÉ de evaluare'
    ]
  }
];
let currentChap=null, currentOpt=null, currentType=null;
let timer=0, timerID=null, questions=[], qIndex=0;
let answers = [];
const $ = sel=>document.querySelector(sel);
const $$ = sel=>[...document.querySelectorAll(sel)];
const fmtTime = s=>`${String(Math.floor(s/60)).padStart(2,'0')}:${String(s%60).padStart(2,'0')}`;
function buildSidebar(){
  const sb = $('#sidebar');
  sb.innerHTML = '';
  STRUCTURE.forEach(chap => {
    const capDiv = document.createElement('div');
    capDiv.className = 'chapter';
    capDiv.innerHTML = `
      <div class="chapter-title">${chap.name}</div>
      <div class="chapter-menu" style="display:none;flex-direction:column;gap:.5em;margin-top:.5em;">
        ${chap.options.map(opt => {
          if(opt === 'StructurƒÉ »ôi obiective') {
            return `
              <div style='display:flex;flex-direction:column;gap:.3em;'>
                <button class='media-btn struct-btn' data-chap="${chap.name}" data-opt="StructurƒÉ »ôi obiective">StructurƒÉ »ôi obiective</button>
                <div style='display:flex;gap:.5em;margin-left:1.2em;'>
                  <button class="media-btn pdf-btn" data-chap="${chap.name}" data-opt="StructurƒÉ »ôi obiective" data-type="pdf"><span style='color:#d62828;font-weight:bold;'>üìÑ PDF</span></button>
                  <button class="media-btn mp4-btn" data-chap="${chap.name}" data-opt="StructurƒÉ »ôi obiective" data-type="mp4"><span style='color:#388e3c;font-weight:bold;'>üé¨ MP4</span></button>
                </div>
              </div>
            `;
          } else {
            return `<button class="media-btn" data-chap="${chap.name}" data-opt="${opt}">${opt}</button>`;
          }
        }).join('')}
      </div>
    `;
    sb.appendChild(capDiv);
  });
  $$('.chapter-title').forEach(title => {
    title.onclick = () => {
      $$('.chapter').forEach(x=>x.classList.remove('active'));
      $$('.chapter-menu').forEach(menu=>menu.style.display='none');
      const chapterDiv = title.closest('.chapter');
      chapterDiv.classList.add('active');
      chapterDiv.querySelector('.chapter-menu').style.display = 'flex';
    };
  });
  setTimeout(() => {
    $$('.media-btn').forEach(btn => {
      if(btn.classList.contains('struct-btn')) return; // ignorƒÉ butonul principal
      btn.onclick = (e) => {
        currentChap = btn.dataset.chap;
        currentOpt = btn.dataset.opt;
        currentType = btn.dataset.type || null;
        render();
      };
    });
  }, 0);
  $('#content').innerHTML = `<p style="font-size:1.2em;color:#888;text-align:center;margin-top:3em">SelecteazƒÉ un capitol »ôi o op»õiune din st√¢nga pentru a √Æncepe.</p>`;
}
function render(){
  $('#summaryPage')?.classList.add('hidden');
  const c=$('#content');
  if(!currentOpt || !currentChap){ c.innerHTML=`<p>${LANG.select_ch}</p>`; return; }
  if(currentOpt === 'StructurƒÉ »ôi obiective') {
    if(currentType === 'pdf') {
      renderPDF(c, currentChap);
    } else if(currentType === 'mp4') {
      renderVideo(c, currentChap, currentOpt);
    } else {
      c.innerHTML = `<p>SelecteazƒÉ PDF sau MP4.</p>`;
    }
  } else if(currentOpt === 'Teorie' || currentOpt === 'Aplicabilitate') {
    renderVideo(c, currentChap, currentOpt);
  } else if(currentOpt === 'Chestionar') {
    renderQuiz(c, currentChap);
  } else if(currentOpt === 'Fi»ôa personalƒÉ de evaluare') {
    renderProgress(c, currentChap);
  } else {
    c.innerHTML = `<p>Op»õiune necunoscutƒÉ.</p>`;
  }
}
function renderVideo(box, chap, opt){
  const capitolNr = chap.match(/\d+/)?.[0] || '1';
  let fileName = '';
  if(opt === 'StructurƒÉ »ôi obiective') {
    fileName = `Modul_1_Capitolul_${capitolNr}_Structura.mp4`;
  } else if(opt === 'Teorie') {
    fileName = `Modul_1_Capitolul_${capitolNr}_Teorie.mp4`;
  } else if(opt === 'Aplicabilitate') {
    fileName = `Modul_1_Capitolul_${capitolNr}_Aplicabilitate.mp4`;
  }
  var videoPath = `../module/files/${fileName}`;
  box.innerHTML = `
    <h2>${chap} ‚Äì ${opt}</h2>
    <video id="videoViewer" controls style="width:100%;max-width:900px;display:block;margin:auto;border-radius:8px;background:#000;">
      <source src="${videoPath}" type="video/mp4">
      Browserul nu poate reda acest video.
    </video>
    <p style="margin-top:1em;color:#888">La selec»õia acestei op»õiuni se va deschide fi»ôierul <b>${fileName}</b></p>
  `;
}
function renderPDF(box, chap) {
  const capitolNr = chap.match(/\d+/)?.[0] || '1';
  const fileName = `Modul_1_Capitolul_${capitolNr}_Structura.pdf`;
  box.innerHTML = `
    <h2>${chap} ‚Äì StructurƒÉ »ôi obiective (PDF)</h2>
    <div id="pdfNav" style="margin:1em auto 1.5em auto; display:flex; justify-content:center; align-items:center; gap:1em; background:#eaf6ff; border-radius:8px; box-shadow:0 2px 8px #b3cdfa33; padding:.7em 1.5em; max-width:700px;">
      <button id="prevPageBtn" style="font-size:1.3em; background:#fff; color:#1976d2; border:2px solid #1976d2; border-radius:6px; padding:.3em 1em; cursor:pointer;">‚¨ÖÔ∏è</button>
      <span id="pdfPageInfo" style="font-size:1.1em; font-weight:600; color:#1976d2;"></span>
      <button id="nextPageBtn" style="font-size:1.3em; background:#fff; color:#1976d2; border:2px solid #1976d2; border-radius:6px; padding:.3em 1em; cursor:pointer;">‚û°Ô∏è</button>
    </div>
    <div style="display:flex; justify-content:center;">
      <canvas id="pdfViewer" style="background:#fff; border-radius:8px; box-shadow:0 2px 12px #b3cdfa33; margin-bottom:2em; max-width:100%;"></canvas>
    </div>
    <p style="margin-top:1em;color:#888">La selec»õia acestei op»õiuni se va deschide fi»ôierul <b>${fileName}</b></p>
  `;
  setTimeout(() => {
    const url = `../module/files/${fileName}`;
    let pdfDoc = null,
        pageNum = 1,
        pageRendering = false,
        pageNumPending = null,
        scale = 1.2,
        canvas = document.getElementById('pdfViewer'),
        ctx = canvas.getContext('2d');
    function renderPage(num) {
      pageRendering = true;
      pdfDoc.getPage(num).then(function(page) {
        let viewport = page.getViewport({ scale: scale });
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        let renderContext = {
          canvasContext: ctx,
          viewport: viewport
        };
        let renderTask = page.render(renderContext);
        renderTask.promise.then(function() {
          pageRendering = false;
          if (pageNumPending !== null) {
            renderPage(pageNumPending);
            pageNumPending = null;
          }
        });
        document.getElementById('pdfPageInfo').textContent = `Pagina ${num} / ${pdfDoc.numPages}`;
      });
    }
    function queueRenderPage(num) {
      if (pageRendering) {
        pageNumPending = num;
      } else {
        renderPage(num);
      }
    }
    function onPrevPage() {
      if (pageNum <= 1) return;
      pageNum--;
      queueRenderPage(pageNum);
    }
    function onNextPage() {
      if (pageNum >= pdfDoc.numPages) return;
      pageNum++;
      queueRenderPage(pageNum);
    }
    document.getElementById('prevPageBtn').addEventListener('click', onPrevPage);
    document.getElementById('nextPageBtn').addEventListener('click', onNextPage);
    if(window.pdfjsLib) {
      window.pdfjsLib.getDocument(url).promise.then(function(pdfDoc_) {
        pdfDoc = pdfDoc_;
        document.getElementById('pdfPageInfo').textContent = `Pagina 1 / ${pdfDoc.numPages}`;
        renderPage(pageNum);
      });
    }
  }, 0);
}
const FISA_QUESTIONS = {
  'Capitolul 1': [
    '√én»õeleg structura »ôi caracteristicile sistemului psihic uman »ôi pot explica diferen»õa dintre psihologia generalƒÉ »ôi psihologia medicalƒÉ.',
    'Cunosc »ôi pot aplica metodele de bazƒÉ ale psihologiei (observa»õie, interviu, anamnezƒÉ etc.) √Æn activitatea medicalƒÉ.',
    'Pot identifica reac»õii »ôi comportamente psihice ale pacien»õilor »ôi le notez corect √Æn fi»ôa de observa»õie.',
    'MƒÉ implic empatic √Æn rela»õia cu pacien»õii »ôi colaborez eficient cu echipa medicalƒÉ √Æn sprijinul acestora.',
    'Recunosc procesele senzoriale »ôi pot semnala tulburƒÉri precum halucina»õii, iluzii sau agnozie.',
    'Identific corect procesele cognitive superioare (g√¢ndire, memorie, aten»õie etc.) »ôi posibilele tulburƒÉri asociate.',
    'Adaptez comunicarea »ôi comportamentul √Æn func»õie de starea emo»õionalƒÉ »ôi cognitivƒÉ a pacientului.',
    '√én»õeleg importan»õa motiva»õiei, afectivitƒÉ»õii, voin»õei »ôi aten»õiei √Æn comportamentul uman »ôi √Æn practica medicalƒÉ.',
    'Sunt capabil(ƒÉ) sƒÉ observ »ôi sƒÉ interpretez reac»õii precum demotivarea, impulsivitatea sau dificultƒÉ»õile de concentrare.',
    '√émi evaluez √Æn mod sincer capacitatea de concentrare, motiva»õia »ôi autocontrolul √Æn timpul stagiului clinic.'
  ],
  'Capitolul 2': [
    '√én»õeleg ce sunt serviciile medicale »ôi pot descrie componentele sistemului de sƒÉnƒÉtate.',
    'Cunosc rolul »ôi responsabilitƒÉ»õile asistentului medical √Æn diferite tipuri de unitƒÉ»õi sanitare.',
    'Identific corect nevoile fundamentale ale pacientului »ôi »ôtiu sƒÉ le corelez cu interven»õii specifice.',
    'Aplic √Æn mod corespunzƒÉtor tehnici de igienƒÉ, mobilizare, alimenta»õie »ôi eliminare, respect√¢nd siguran»õa pacientului.',
    'Monitorizez semnele vitale »ôi √Ænregistrez corect datele √Æn fi»ôa de observa»õie.',
    'Cunosc cƒÉile de administrare a medicamentelor »ôi pot explica avantajele »ôi riscurile fiecƒÉreia.',
    'Respect pa»ôii de administrare a tratamentelor »ôi urmƒÉresc reac»õiile pacientului dupƒÉ administrare.',
    'Aplic corect procedurile de recoltare a probelor biologice »ôi respect regulile de igienƒÉ »ôi etichetare.',
    'PregƒÉtesc pacientul corespunzƒÉtor √Ænaintea tratamentului »ôi comunic eficient √Æn toate etapele.',
    'Supraveghez pacientul √Æn timpul tratamentului »ôi »ôtiu cum sƒÉ ac»õionez √Æn caz de reac»õii adverse.'
  ],
  'Capitolul 3': [
    'Pot recunoa»ôte »ôi diferen»õia tipurile de tuse, dispnee »ôi expectora»õie, √Æn func»õie de afec»õiunea respiratorie.',
    'Asociez simptomele caracteristice fiecƒÉrei boli respiratorii (ex: pleurezie, astm, tuberculozƒÉ) »ôi »ôtiu c√¢nd trebuie alertat personalul medical.',
    'Monitorizez corect T.A., pulsul, respira»õia »ôi notez √Æn fi»ôa pacientului modificƒÉrile relevante.',
    'Identific simptomele specifice bolilor cardiovasculare »ôi le corelez cu afec»õiuni precum cardiopatia ischemicƒÉ sau insuficien»õa cardiacƒÉ.',
    'Recunosc semnele digestive importante (icter, vƒÉrsƒÉturi, diaree) »ôi le notez obiectiv √Æn fi»ôa de observa»õie.',
    'Aplic mƒÉsuri de √Ængrijire potrivite pacientului cu dificultƒÉ»õi respiratorii (pozi»õionare, oxigen, calmare).',
    'Respect regulile de igienƒÉ »ôi protec»õie la contactul cu pacien»õi cu boli contagioase sau digestive.',
    'Colaborez eficient cu echipa medicalƒÉ, semnal√¢nd orice agravare a stƒÉrii pacientului.',
    'Ofer sprijin fizic »ôi emo»õional pacien»õilor cu afec»õiuni cronice sau simptomatologie severƒÉ.',
    'MƒÉ adaptez situa»õiilor clinice »ôi sprijin pacientul √Æn alimenta»õie, hidratare »ôi men»õinerea confortului.'
  ]
};
function renderProgress(box){
  const fisaQuestions = FISA_QUESTIONS[currentChap] || [
    `${currentChap}: √éntrebare 1 fi»ôƒÉ?`,
    `${currentChap}: √éntrebare 2 fi»ôƒÉ?`
  ];
  box.innerHTML = `
    <div class="frame">
      <h2 style="margin-bottom:.3em">Fi»ôa personalƒÉ de evaluare ‚Äì ${currentChap}</h2>
      <form id="progresForm">
        <table style="width:100%;border-collapse:collapse;margin-bottom:1em;">
          <thead>
            <tr style="background:#eaf6ff;">
              <th style="padding:.5em;border:1px solid #b3cdfa;">CompleteazƒÉ bifa corespunzƒÉtoare pentru fiecare activitate:</th>
              <th style="padding:.5em;border:1px solid #b3cdfa;">Da</th>
              <th style="padding:.5em;border:1px solid #b3cdfa;">Par»õial</th>
              <th style="padding:.5em;border:1px solid #b3cdfa;">Nu</th>
              <th style="padding:.5em;border:1px solid #b3cdfa;">Observa»õii (max 50 caractere)</th>
            </tr>
          </thead>
          <tbody>
            ${fisaQuestions.map((q, i) => `
              <tr>
                <td style="padding:.5em;border:1px solid #b3cdfa;">${q}</td>
                <td style="text-align:center;border:1px solid #b3cdfa;"><input type="radio" name="q${i}" value="Da" required></td>
                <td style="text-align:center;border:1px solid #b3cdfa;"><input type="radio" name="q${i}" value="Par»õial"></td>
                <td style="text-align:center;border:1px solid #b3cdfa;"><input type="radio" name="q${i}" value="Nu"></td>
                <td style="border:1px solid #b3cdfa;"><input type="text" name="obs${i}" maxlength="50" style="width:98%;padding:.3em;border-radius:4px;border:1px solid #b3cdfa;"></td>
              </tr>
            `).join('')}
          </tbody>
        </table>
        <button type="submit">SalveazƒÉ fi»ôa</button>
      </form>
      <div id="progresMsg" style="margin-top:1em;color:var(--clr-main);font-weight:500;"></div>
      <button id="redoFisaBtn" style="display:none;margin-top:1.5em;background:#fff;color:var(--clr-main);border:2px solid var(--clr-main);font-weight:600;padding:.6em 1.2em;border-radius:6px;">CompleteazƒÉ din nou</button>
      <div id="fisaModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.35);z-index:1000;align-items:center;justify-content:center;">
        <div style="background:#fff;color:#222;padding:2em 2.5em;border-radius:12px;max-width:700px;width:95vw;box-shadow:0 8px 32px rgba(0,0,0,0.18);position:relative;">
          <button id="closeFisaModal" style="position:absolute;top:1em;right:1em;font-size:1.3em;background:none;border:none;color:#888;cursor:pointer;">&times;</button>
          <div id="fisaModalContent"></div>
        </div>
      </div>
    </div>
  `;
  document.getElementById('progresForm').onsubmit = function(e){
    e.preventDefault();
    const data = {};
    const prenume = document.getElementById('prenume')?.value || '';
    const nume = document.getElementById('nume')?.value || '';
    const email = document.getElementById('email')?.value || '';
    fisaQuestions.forEach((q, i) => {
      const radios = this.querySelectorAll('input[name="q'+i+'"]');
      let selected = '';
      radios.forEach(r => { if(r.checked) selected = r.value; });
      data['q'+i] = selected;
      data['obs'+i] = this['obs'+i].value;
    });
    const fisaHTML = `
      <div style="margin-bottom:1em;font-size:1.08em;">
        <strong>Nume:</strong> <span style="color:var(--clr-main)">${nume}</span> &nbsp; 
        <strong>Prenume:</strong> <span style="color:var(--clr-main)">${prenume}</span> &nbsp; 
        <strong>Email:</strong> <span style="color:var(--clr-main)">${email}</span>
      </div>
      <table style="width:100%;border-collapse:collapse;">
        <thead>
          <tr style="background:#b3cdfa;">
            <th style="padding:.5em;border:1px solid #b3cdfa;">√éntrebare</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">RƒÉspuns</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">Observa»õii</th>
          </tr>
        </thead>
        <tbody>
          ${fisaQuestions.map((q, i) => `
            <tr>
              <td style="padding:.5em;border:1px solid #b3cdfa;">${q}</td>
              <td style="text-align:center;border:1px solid #b3cdfa;">${data['q'+i]}</td>
              <td style="border:1px solid #b3cdfa;">${data['obs'+i] ? data['obs'+i] : '-'}</td>
            </tr>
          `).join('')}
        </tbody>
      </table>
    `;
    document.getElementById('fisaModalContent').innerHTML = "<h3 style='margin-top:0'>Fi»ôa personalƒÉ completatƒÉ</h3>" + fisaHTML;
    document.getElementById('fisaModal').style.display = 'flex';
    document.getElementById('redoFisaBtn').style.display = 'inline-block';
    document.getElementById('progresMsg').innerHTML = '<span style="color:var(--clr-main);font-weight:500;">Fi»ôa a fost salvatƒÉ!</span>';
    Array.from(this.querySelectorAll('input, button')).forEach(el => el.disabled = true);
    document.getElementById('closeFisaModal').onclick = function() {
      document.getElementById('fisaModal').style.display = 'none';
    };
    document.getElementById('redoFisaBtn').onclick = function() {
      document.getElementById('progresForm').reset();
      Array.from(document.getElementById('progresForm').querySelectorAll('input, button')).forEach(el => el.disabled = false);
      document.getElementById('progresForm').style.display = '';
      document.getElementById('fisaModal').style.display = 'none';
      document.getElementById('redoFisaBtn').style.display = 'none';
      document.getElementById('progresMsg').innerHTML = '';
    };
  };
}
// ===== QUIZZES STRUCTURE =====
const QUIZZES = {};
STRUCTURE.forEach(chapObj => {
  QUIZZES[chapObj.name] = { q: [], idx: 0, score: 0, res: [] };
});
QUIZZES['Capitolul 1'].q = [
  {
    t:'Ce caracteristicƒÉ a sistemului psihic reflectƒÉ faptul cƒÉ fiecare persoanƒÉ reac»õioneazƒÉ diferit la aceea»ôi situa»õie?',
    o:['Este organizat','Este dinamic','Este unic','Este voluntar'],
    a:'Este unic',
    e:'Fiecare individ reac»õioneazƒÉ diferit deoarece sistemul psihic este unic.'
  },
  {
    t:'Metoda care presupune urmƒÉrirea comportamentului?',
    o:['Convorbirea','Observa»õia','Ancheta','Psihometria'],
    a:'Observa»õia',
    e:'Observa»õia presupune urmƒÉrirea atentƒÉ a comportamentului pacientului.'
  },
  {
    t:'Care dintre urmƒÉtoarele este o tulburare senzorialƒÉ?',
    o:['Amnezie','Halucina»õie','Abulie','Afazie'],
    a:'Halucina»õie',
    e:'Halucina»õia este o percep»õie falsƒÉ, o tulburare senzorialƒÉ.'
  },
  {
    t:'Ce proces psihic superior permite re»õinerea »ôi redarea informa»õiilor?',
    o:['G√¢ndirea','Imagina»õia','Memoria','Aten»õia'],
    a:'Memoria',
    e:'Memoria este responsabilƒÉ de stocarea »ôi reamintirea informa»õiilor.'
  },
  {
    t:'Ce tip de motiva»õie vine din dorin»õa de a face un lucru din convingere personalƒÉ?',
    o:['ExtrinsecƒÉ','PasivƒÉ','ActivƒÉ','IntrinsecƒÉ'],
    a:'IntrinsecƒÉ',
    e:'Motiva»õia intrinsecƒÉ vine din interior, fƒÉrƒÉ influen»õe externe.'
  },
  {
    t:'Ce emo»õie este un exemplu de manifestare afectivƒÉ de scurtƒÉ duratƒÉ?',
    o:['Respectul','Furia','Iubirea','Depresia'],
    a:'Furia',
    e:'Furia este o emo»õie intensƒÉ, dar de scurtƒÉ duratƒÉ.'
  },
  {
    t:'Care este prima etapƒÉ √Æn structura voin»õei?',
    o:['Decizia','Sus»õinerea efortului','Finalizarea ac»õiunii','Alegerea scopului'],
    a:'Alegerea scopului',
    e:'Orice ac»õiune voluntarƒÉ √Æncepe cu alegerea unui scop'
  },
  {
    t:'Cum se nume»ôte capacitatea de a te concentra activ asupra unui obiect?',
    o:['Memorie','Imagina»õie','Aten»õie','Percep»õie'],
    a:'Aten»õie',
    e:'Aten»õia presupune orientarea »ôi men»õinerea con»ôtientƒÉ a concentrƒÉrii.'
  },
  {
    t:'Ce exemplu din practicƒÉ indicƒÉ o posibilƒÉ tulburare de g√¢ndire?',
    o:['Pacientul spune cƒÉ medicul e robot extraterestru','Pacientul uitƒÉ ce zi este','Pacientul nu recunoa»ôte o cea»ôcƒÉ de ceai','Pacientul repetƒÉ √Æntrebarea de mai multe ori'],
    a:'Pacientul spune cƒÉ medicul e robot extraterestru',
    e:'Delirul este o tulburare de g√¢ndire ‚Äì afirma»õia indicƒÉ delir'
  },
  {
    t:'Ce tulburare se manifestƒÉ prin pierderea capacitƒÉ»õii de exprimare verbalƒÉ?',
    o:['Hipoprosexie','Anhedonie','Afazie','Agnozie'],
    a:'Afazie',
    e:'Afazia afecteazƒÉ exprimarea »ôi √Æn»õelegerea limbajului verbal.'
  }
];
QUIZZES['Capitolul 2'].q = [
  {
    t:'Ce reprezintƒÉ serviciile medicale?',
    o:['ActivitƒÉ»õi de recreere pentru pacien»õi','Interven»õii chirurgicale de urgen»õƒÉ','ActivitƒÉ»õi organizate pentru men»õinerea »ôi √ÆmbunƒÉtƒÉ»õirea sƒÉnƒÉtƒÉ»õii','Transportul pacien»õilor √Æntre spitale'],
    a:'ActivitƒÉ»õi organizate pentru men»õinerea »ôi √ÆmbunƒÉtƒÉ»õirea sƒÉnƒÉtƒÉ»õii',
    e:'Serviciile medicale sunt definite ca activitƒÉ»õi organizate pentru men»õinerea, restabilirea sau √ÆmbunƒÉtƒÉ»õirea stƒÉrii de sƒÉnƒÉtate.'
  },
  {
    t:'Care este rolul asistentului medical √Æn echipa de √Ængrijire?',
    o:['Prescrierea tratamentelor','Aplicarea tehnicilor de bazƒÉ »ôi monitorizarea pacientului','Eliberarea de bilete de trimitere','√éntocmirea fi»ôei de internare'],
    a:'Aplicarea tehnicilor de bazƒÉ »ôi monitorizarea pacientului',
    e:'Asistentul medical are rolul de a aplica tehnici de √Ængrijire, de a supraveghea pacientul »ôi de a sus»õine comunicarea √Æn echipƒÉ.'
  },
  {
    t:'Care dintre urmƒÉtoarele reprezintƒÉ o nevoie fundamentale?',
    o:['Nevoia de a socializa online','Nevoia de a respecta un regim estetic','Nevoia de a respira »ôi de a avea o circula»õie adecvatƒÉ','Nevoia de a citi zilnic'],
    a:'Nevoia de a respira »ôi de a avea o circula»õie adecvatƒÉ',
    e:'Respira»õia »ôi circula»õia sunt nevoi fiziologice fundamentale esen»õiale pentru via»õƒÉ.'
  },
  {
    t:'Care este cea mai frecventƒÉ cale de administrare a medicamentelor?',
    o:['RectalƒÉ','IntravenoasƒÉ','OralƒÉ','Inhalatorie'],
    a:'OralƒÉ',
    e:'Calea oralƒÉ este cea mai simplƒÉ »ôi frecvent utilizatƒÉ metodƒÉ de administrare a medicamentelor.'
  },
  {
    t:'Ce presupune recoltarea corectƒÉ a urinei pentru uroculturƒÉ?',
    o:['Se colecteazƒÉ √Æn orice recipient curat','Se recolteazƒÉ fƒÉrƒÉ igienƒÉ prealabilƒÉ','Se recolteazƒÉ mijlocul jetului urinar √Æntr-un recipient steril','Se adaugƒÉ apƒÉ pentru volum'],
    a:'Se recolteazƒÉ mijlocul jetului urinar √Æntr-un recipient steril',
    e:'Pentru uroculturƒÉ, se recolteazƒÉ mijlocul jetului urinar √Æntr-un recipient steril, dupƒÉ igienƒÉ localƒÉ.'
  },
  {
    t:'Ce trebuie fƒÉcut √Æn cazul apari»õiei unei reac»õii adverse √Æn timpul unei perfuzii?',
    o:['Se continuƒÉ perfuzia p√¢nƒÉ la final','Se ignorƒÉ »ôi se monitorizeazƒÉ pacientul ulterior','Se opre»ôte perfuzia »ôi se anun»õƒÉ personalul medical','Se administreazƒÉ calmante fƒÉrƒÉ prescrip»õie'],
    a:'Se opre»ôte perfuzia »ôi se anun»õƒÉ personalul medical',
    e:'√én caz de reac»õie adversƒÉ, se opre»ôte perfuzia imediat »ôi se informeazƒÉ personalul medical responsabil.'
  },
  {
    t:'Ce √ÆnseamnƒÉ supravegherea pacientului √Æn timpul tratamentului?',
    o:['A verifica doar dacƒÉ pacientul a luat tratamentul','A urmƒÉri reac»õiile pacientului »ôi a evalua semnele vitale','A discuta cu familia pacientului','A colecta fi»ôa pacientului dupƒÉ tratament'],
    a:'A urmƒÉri reac»õiile pacientului »ôi a evalua semnele vitale',
    e:'Supravegherea presupune observarea continuƒÉ a pacientului »ôi evaluarea semnelor vitale √Æn timpul tratamentului.'
  },
  {
    t:'Ce include notarea corectƒÉ a reac»õiilor pacientului √Æn fi»ôa de tratament?',
    o:['Opinia personalƒÉ despre pacient','Simptome observate »ôi ac»õiuni √Æntreprinse','Date personale ale asistentului','Comentarii despre rudele pacientului'],
    a:'Simptome observate »ôi ac»õiuni √Æntreprinse',
    e:'Notarea corectƒÉ presupune men»õionarea obiectivƒÉ a reac»õiilor pacientului »ôi a mƒÉsurilor luate.'
  },
  {
    t:'Ce se utilizeazƒÉ pentru recoltarea sputei la pacient?',
    o:['Recipient nesteril, dupƒÉ ce pacientul a m√¢ncat','Recipient steril, diminea»õa pe nem√¢ncate','Orice pahar curat','Recipient de urinƒÉ'],
    a:'Recipient steril, diminea»õa pe nem√¢ncate',
    e:'Sputa se recolteazƒÉ diminea»õa, pe nem√¢ncate, √Æntr-un recipient steril, pentru a evita contaminarea.'
  },
  {
    t:'Ce principiu se aplicƒÉ √Æn administrarea medicamentelor injectabile?',
    o:['Administrarea se face fƒÉrƒÉ a anun»õa pacientul','Se ignorƒÉ reac»õiile locale','Se respectƒÉ doza, calea »ôi ora indicatƒÉ de prescrip»õie','Se administreazƒÉ √Æn func»õie de preferin»õele pacientului'],
    a:'Se respectƒÉ doza, calea »ôi ora indicatƒÉ de prescrip»õie',
    e:'Respectarea prescrip»õiei medicului ‚Äì dozƒÉ, orƒÉ, cale ‚Äì este fundamentalƒÉ √Æn administrarea medicamentelor injectabile.'
  }
];
QUIZZES['Capitolul 3'].q = [
  {
    t:'Care dintre urmƒÉtoarele simptome este specific astmului bron»ôic?',
    o:['Durere toracicƒÉ accentuatƒÉ la inspira»õie','Tuse productivƒÉ cu febrƒÉ mare','Tuse seacƒÉ, dispnee »ôi wheezing','Hemoptizie »ôi icter'],
    a:'Tuse seacƒÉ, dispnee »ôi wheezing',
    e:'Tusea seacƒÉ, dispneea »ôi wheezing-ul sunt caracteristice crizei de astm bron»ôic.'
  },
  {
    t:'Ce simptom diferen»õiazƒÉ tuberculoza de celelalte boli respiratorii?',
    o:['Wheezing','Tuse productivƒÉ cu secre»õii purulente','Tuse persistentƒÉ cu hemoptizie »ôi transpira»õii nocturne','Durere toracicƒÉ la inspira»õie'],
    a:'Tuse persistentƒÉ cu hemoptizie »ôi transpira»õii nocturne',
    e:'Tuberculoza se manifestƒÉ prin tuse cronicƒÉ, hemoptizie, scƒÉdere ponderalƒÉ »ôi transpira»õii nocturne.'
  },
  {
    t:'Ce mƒÉsurƒÉ este indicatƒÉ √Æn √Ængrijirea pacientului cu pleurezie?',
    o:['Mobilizare frecventƒÉ','Pozi»õie clinostaticƒÉ','Pozi»õie semisez√¢ndƒÉ »ôi repaus','Exerci»õii respiratorii active'],
    a:'Pozi»õie semisez√¢ndƒÉ »ôi repaus',
    e:'Pozi»õia semisez√¢ndƒÉ ajutƒÉ la reducerea disconfortului »ôi √ÆmbunƒÉtƒÉ»õirea respira»õiei.'
  },
  {
    t:'Care este combina»õia tipicƒÉ de simptome √Æn insuficien»õa cardiacƒÉ?',
    o:['Durere toracicƒÉ »ôi hipertensiune','Dispnee, edeme gambiere »ôi fatigabilitate','Palpita»õii »ôi ame»õeli','Tuse uscatƒÉ »ôi febrƒÉ'],
    a:'Dispnee, edeme gambiere »ôi fatigabilitate',
    e:'Dispneea, edemele »ôi oboseala sunt semne clasice de insuficien»õƒÉ cardiacƒÉ.'
  },
  {
    t:'Ce simptom este specific unui episod de anginƒÉ pectoralƒÉ?',
    o:['Dispnee severƒÉ la repaus','Durere toracicƒÉ constrictivƒÉ la efort','Tuse productivƒÉ cu febrƒÉ','Palpita»õii cu sincopƒÉ'],
    a:'Durere toracicƒÉ constrictivƒÉ la efort',
    e:'Angina pectoralƒÉ se manifestƒÉ prin durere toracicƒÉ de tip constrictiv, declan»ôatƒÉ la efort.'
  },
  {
    t:'Ce simptom este semn de agravare √Æn pancreatitƒÉ acutƒÉ?',
    o:['Grea»õƒÉ dupƒÉ masƒÉ','Durere epigastricƒÉ u»ôoarƒÉ','Durere intensƒÉ √Æn barƒÉ »ôi vƒÉrsƒÉturi persistente','Balonare moderatƒÉ'],
    a:'Durere intensƒÉ √Æn barƒÉ »ôi vƒÉrsƒÉturi persistente',
    e:'Pancreatita acutƒÉ se manifestƒÉ prin durere abdominalƒÉ severƒÉ, vƒÉrsƒÉturi »ôi semne de alterare a stƒÉrii generale.'
  },
  {
    t:'Ce simptom este sugestiv pentru hepatitƒÉ viralƒÉ?',
    o:['Tuse persistentƒÉ »ôi febrƒÉ','Icter, urinƒÉ √ÆnchisƒÉ la culoare »ôi inapeten»õƒÉ','Durere √Æn hipogastru »ôi diaree','Hemoptizie »ôi febrƒÉ'],
    a:'Icter, urinƒÉ √ÆnchisƒÉ la culoare »ôi inapeten»õƒÉ',
    e:'Hepatita viralƒÉ se manifestƒÉ prin icter, urinƒÉ hipercromƒÉ »ôi stare generalƒÉ alteratƒÉ.'
  },
  {
    t:'Ce mƒÉsurƒÉ este adecvatƒÉ √Æn √Ængrijirea pacientului cu sindrom diareic?',
    o:['Mobilizare imediatƒÉ','Administrarea de aliment solid','Rehidratare »ôi monitorizarea scaunelor','Exerci»õii fizice zilnice'],
    a:'Rehidratare »ôi monitorizarea scaunelor',
    e:'√én sindromul diareic, prioritare sunt hidratarea »ôi observarea frecven»õei scaunelor.'
  },
  {
    t:'Ce manifestare necesitƒÉ alertarea imediatƒÉ a echipei medicale?',
    o:['Tuse uscatƒÉ intermitentƒÉ','ScƒÉderea apetitului','Hemoptizie »ôi dificultƒÉ»õi respiratorii','Durere u»ôoarƒÉ la nivel epigastric'],
    a:'Hemoptizie »ôi dificultƒÉ»õi respiratorii',
    e:'Hemoptizia »ôi dispneea severƒÉ pot indica o urgen»õƒÉ medicalƒÉ (ex. tuberculozƒÉ activƒÉ sau embolism).'
  },
  {
    t:'Ce simptom diferƒÉ √Æntre gastritƒÉ »ôi hepatitƒÉ?',
    o:['Grea»õa','Durerea epigastricƒÉ','Icterul','VƒÉrsƒÉturile'],
    a:'Icterul',
    e:'Icterul este caracteristic hepatitei, nu apare √Æn gastritƒÉ.'
  }
];

function renderQuiz(box, chap) {
  questions = QUIZZES[chap]?.q || [];
  qIndex = 0;
  answers = Array(questions.length).fill(null);
  box.innerHTML = `
    <h2>Chestionar ‚Äì ${chap}</h2>
    <div id="progressBar"><div id="progressFill"></div></div>
    <div id="quizPages"></div>
    <div style="margin-top:1em">
      <button id="backBtn" style="display:none">${LANG.back}</button>
      <button id="nextBtn">${LANG.next}</button>
    </div>
    <div style="margin-top:.7em;font-size:.95em;color:var(--clr-accent)"><span id="infoTimer">00:00</span></div>
  `;
  showQuestionPage(qIndex);
  updateProgress();
}
function showQuestionPage(i){
  const q = questions[i];
  const cont = $('#quizPages');
  cont.innerHTML = `
    <p><strong>√éntrebarea ${i+1} / ${questions.length}</strong><br>${q.t}</p>
    ${q.o.map(o=>`<label><input type=\"radio\" name=\"q${i}\" value=\"${o}\"> ${o}</label><br>`).join('')}
    <div id=\"feed${i}\" class=\"result-inline\"></div>
  `;
  $('#backBtn').style.display = i ? 'inline-block' : 'none';
  const nextBtn = $('#nextBtn');
  nextBtn.textContent = i < questions.length-1 ? LANG.next : 'Finalizare';
  nextBtn.disabled = answers[i] ? false : true;
  // PreselecteazƒÉ rƒÉspunsul anterior dacƒÉ existƒÉ
  if(answers[i]) {
    const inp = cont.querySelector(`input[name="q${i}"][value="${answers[i]}"]`);
    if(inp) inp.checked = true;
    // Afi»ôeazƒÉ feedback
    const feed = $('#feed'+i);
    if(answers[i] === q.a) {
      feed.innerHTML = '<span style="color:green;font-weight:bold">CORECT</span>';
    } else {
      feed.innerHTML = `<span style=\"color:red;font-weight:bold\">INCORECT</span> <span style=\"color:#444\">RƒÉspuns corect: <b>${q.a}</b></span><br><span style=\"color:#1976d2;font-size:.98em\"><em>${q.e}</em></span>`;
    }
    cont.querySelectorAll(`input[name="q${i}"]`).forEach(r => r.disabled = true);
  }
  // Feedback instant cu salvare rƒÉspuns
  cont.querySelectorAll(`input[name="q${i}"]`).forEach(inp => {
    inp.onclick = function() {
      answers[i] = this.value;
      const feed = $('#feed'+i);
      if(this.value === q.a) {
        feed.innerHTML = '<span style="color:green;font-weight:bold">CORECT</span>';
      } else {
        feed.innerHTML = `<span style=\"color:red;font-weight:bold\">INCORECT</span> <span style=\"color:#444\">RƒÉspuns corect: <b>${q.a}</b></span><br><span style=\"color:#1976d2;font-size:.98em\"><em>${q.e}</em></span>`;
      }
      cont.querySelectorAll(`input[name="q${i}"]`).forEach(r => r.disabled = true);
      nextBtn.disabled = false;
    };
  });
  // La click pe [√énapoi], dezactiveazƒÉ op»õiunile
  $('#backBtn').onclick = () => {
    if(i>0){
      qIndex--;
      showQuestionPage(qIndex);
      updateProgress();
      $('#quizPages').querySelectorAll(`input[name="q${qIndex}"]`).forEach(r => r.disabled = true);
      $('#nextBtn').disabled = answers[qIndex] ? false : true;
    }
  };
  // La click pe [UrmƒÉtoarea √Æntrebare] sau [Finalizare]
  nextBtn.onclick = () => {
    if(i < questions.length-1){
      qIndex++;
      showQuestionPage(qIndex);
      updateProgress();
    } else {
      showSummary();
    }
  };
}
function startTimer(){
  timer=0;
  timerID=setInterval(()=>{
    timer++;
    $('#infoTimer').textContent=fmtTime(timer);
  },1000);
}
function nextQ(idx) {
  const sel = document.querySelector(`input[name="q${idx}"]:checked`);
  const feed = $(`#feed${idx}`);
  if (!sel) { feed.innerHTML = `<span class="incorrect">${LANG.choose}</span>`; return; }
  $$(`input[name="q${idx}"]`).forEach(r => r.disabled = true);
  const q = questions[idx];
  const ok = sel.value === q.a;
  feed.innerHTML = ok
    ? `<span class="correct">${LANG.ok}</span>`
    : `<span class="incorrect">${LANG.nok} <strong>${q.a}</strong><br><em>${q.e}</em></span>`;
  ok ? $('#snd-ok').play() : $('#snd-nok').play();
  $$('#backBtn')[idx].style.display = 'inline-block';
  if (idx === questions.length - 1) { setTimeout(showSummary, 1200); return; }
  setTimeout(() => {
    $$('.question-page')[idx].classList.remove('active');
    $$('.question-page')[idx].style.display = 'none';
    $$('.question-page')[idx + 1].classList.add('active');
    $$('.question-page')[idx + 1].style.display = '';
    qIndex = idx + 1;
    updateProgress();
  }, 1200);
}
function prevQ(idx) {
  if (idx > 0) {
    $$('.question-page')[idx].classList.remove('active');
    $$('.question-page')[idx].style.display = 'none';
    $$('.question-page')[idx - 1].classList.add('active');
    $$('.question-page')[idx - 1].style.display = '';
    qIndex = idx - 1;
    updateProgress();
    $$('#backBtn')[idx - 1].style.display = qIndex ? 'inline-block' : 'none';
  }
}
function updateProgress() {
  $('#progressFill').style.width = ((qIndex + 1) / questions.length * 100) + '%';
}
function showSummary(){
  clearInterval(timerID);
  const user=sessionStorage.getItem('user')||($('#prenume').value+' '+$('#nume').value)||'';
  const email=$('#email').value||'';
  const dur=fmtTime(timer);
  const data=new Date().toLocaleString();
  let correct=0;
  let total=questions.length;
  let pct=0;
  let rows=questions.map((q,i)=>{
    const ans=answers[i]||'';
    const ok=ans===q.a;
    if(ok) correct++;
    return `
      <tr>
        <td>${i+1}</td>
        <td>${q.t}</td>
        <td style="color:${ok?'green':'red'}">${ans||'-'}</td>
        <td>${q.a}</td>
        <td>${ok?'‚úîÔ∏è':'‚ùå'}</td>
      </tr>`;
  }).join('');
  pct=Math.round(correct/total*100);
  const verdict=pct>=80?LANG.admitted:LANG.rejected;
  $('#content').innerHTML=`
    <div class="frame">
      <h3>Fi»ôƒÉ personalizatƒÉ ‚Äì Rezultate chestionar</h3>
      <div style="margin-bottom:1em;font-size:1.08em;">
        <strong>Nume:</strong> <span style="color:var(--clr-main)">${user}</span> &nbsp; 
        <strong>Email:</strong> <span style="color:var(--clr-main)">${email}</span> &nbsp; 
        <strong>Data:</strong> <span style="color:var(--clr-main)">${data}</span> &nbsp; 
        <strong>Durata:</strong> <span style="color:var(--clr-main)">${dur}</span>
      </div>
      <table style="width:100%;border-collapse:collapse;margin-bottom:1em;">
        <thead>
          <tr style="background:#eaf6ff;">
            <th style="padding:.5em;border:1px solid #b3cdfa;">#</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">√éntrebare</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">RƒÉspuns dat</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">RƒÉspuns corect</th>
            <th style="padding:.5em;border:1px solid #b3cdfa;">Statut</th>
          </tr>
        </thead>
        <tbody>${rows}</tbody>
      </table>
      <div style="font-size:1.1em;margin-bottom:1em;"><strong>Punctaj:</strong> ${correct} / ${total} (${pct}%)</div>
      <div style="font-size:1.1em;margin-bottom:1em;"><strong>Rezultat:</strong> <span style="color:${verdict==LANG.admitted?'green':'red'}">${verdict}</span></div>
      <button onclick="location.reload()">${LANG.reset}</button>
    </div>`;
}

window.onload = buildSidebar;
</script>
</body>
</html>